{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADSI-TARDE\\\\Desktop\\\\Poken\\\\src\\\\App.js\";\nimport React from \"react\";\nimport \"./styles.css\";\nimport Navbar from '../src/components/Navbar';\nimport Searchbar from '../src/components/Searchbar';\nimport Pokedex from '../src/components/';\nimport { getPokemonData, getPokemons, searchPokemon } from '../src/api';\nimport { FavoriteProvider } from '../src/contexts/favoritesContext';\nimport Footer from '../src/components/Footer';\nconst {\n  useState,\n  useEffect\n} = React;\nconst localStorageKey = \"favorite_pokemon\";\nexport default function App() {\n  const [pokemons, setPokemons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [searching, setSearching] = useState(false);\n\n  const fetchPokemons = async () => {\n    try {\n      setLoading(true);\n      const data = await getPokemons(25, 25 * page);\n      const promises = data.results.map(async pokemon => {\n        return await getPokemonData(pokemon.url);\n      });\n      const results = await Promise.all(promises);\n      setPokemons(results);\n      setLoading(false);\n      setTotal(Math.ceil(data.count / 25));\n      setNotFound(false);\n    } catch (err) {}\n  };\n\n  const loadFavoritePokemons = () => {\n    const pokemons = JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n\n  useEffect(() => {\n    loadFavoritePokemons();\n  }, []);\n  useEffect(() => {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  const updateFavoritePokemons = name => {\n    const updated = [...favorites];\n    const isFavorite = updated.indexOf(name);\n\n    if (isFavorite >= 0) {\n      updated.splice(isFavorite, 1);\n    } else {\n      updated.push(name);\n    }\n\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  const onSearch = async pokemon => {\n    if (!pokemon) {\n      return fetchPokemons();\n    }\n\n    setLoading(true);\n    setNotFound(false);\n    setSearching(true);\n    const result = await searchPokemon(pokemon);\n\n    if (!result) {\n      setNotFound(true);\n      setLoading(false);\n      return;\n    } else {\n      setPokemons([result]);\n      setPage(0);\n      setTotal(1);\n    }\n\n    setLoading(false);\n    setSearching(false);\n  };\n\n  return /*#__PURE__*/React.createElement(FavoriteProvider, {\n    value: {\n      favoritePokemons: favorites,\n      updateFavoritePokemons: updateFavoritePokemons\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Searchbar, {\n    onSearch: onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), notFound ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"not-found-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"No se encontro el Pokemon que buscabas \\uD83D\\uDE2D\") : /*#__PURE__*/React.createElement(Pokedex, {\n    loading: loading,\n    pokemons: pokemons,\n    page: page,\n    setPage: setPage,\n    total: total,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/ADSI-TARDE/Desktop/Poken/src/App.js"],"names":["React","Navbar","Searchbar","Pokedex","getPokemonData","getPokemons","searchPokemon","FavoriteProvider","Footer","useState","useEffect","localStorageKey","App","pokemons","setPokemons","page","setPage","total","setTotal","loading","setLoading","favorites","setFavorites","notFound","setNotFound","searching","setSearching","fetchPokemons","data","promises","results","map","pokemon","url","Promise","all","Math","ceil","count","err","loadFavoritePokemons","JSON","parse","window","localStorage","getItem","updateFavoritePokemons","name","updated","isFavorite","indexOf","splice","push","setItem","stringify","onSearch","result","favoritePokemons"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./styles.css\";\nimport Navbar from '../src/components/Navbar';\nimport Searchbar from '../src/components/Searchbar';\nimport Pokedex from '../src/components/'\nimport { getPokemonData, getPokemons, searchPokemon } from '../src/api';\nimport { FavoriteProvider } from '../src/contexts/favoritesContext';\nimport Footer from '../src/components/Footer';\n\nconst { useState, useEffect } = React;\n\nconst localStorageKey = \"favorite_pokemon\";\n\nexport default function App() {\n  const [pokemons, setPokemons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [searching, setSearching] = useState(false);\n\n  const fetchPokemons = async () => {\n    try {\n      setLoading(true);\n      const data = await getPokemons(25, 25 * page);\n      const promises = data.results.map(async (pokemon) => {\n        return await getPokemonData(pokemon.url);\n      });\n      const results = await Promise.all(promises);\n      setPokemons(results);\n      setLoading(false);\n      setTotal(Math.ceil(data.count / 25));\n      setNotFound(false);\n    } catch (err) {}\n  };\n\n  const loadFavoritePokemons = () => {\n    const pokemons =\n      JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n\n  useEffect(() => {\n    loadFavoritePokemons();\n  }, []);\n\n  useEffect(() => {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  const updateFavoritePokemons = (name) => {\n    const updated = [...favorites];\n    const isFavorite = updated.indexOf(name);\n    if (isFavorite >= 0) {\n      updated.splice(isFavorite, 1);\n    } else {\n      updated.push(name);\n    }\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  const onSearch = async (pokemon) => {\n    if (!pokemon) {\n      return fetchPokemons();\n    }\n    setLoading(true);\n    setNotFound(false);\n    setSearching(true);\n    const result = await searchPokemon(pokemon);\n    if (!result) {\n      setNotFound(true);\n      setLoading(false);\n      return;\n    } else {\n      setPokemons([result]);\n      setPage(0);\n      setTotal(1);\n    }\n    setLoading(false);\n    setSearching(false);\n  };\n\n  return (\n    <FavoriteProvider\n      value={{\n        favoritePokemons: favorites,\n        updateFavoritePokemons: updateFavoritePokemons\n      }}\n    >\n      <div>\n        <Navbar />\n        <div className=\"App\">\n          <Searchbar onSearch={onSearch} />\n          {notFound ? (\n            <div className=\"not-found-text\">\n              No se encontro el Pokemon que buscabas 😭\n            </div>\n          ) : (\n            <Pokedex\n              loading={loading}\n              pokemons={pokemons}\n              page={page}\n              setPage={setPage}\n              total={total}\n            />\n          )}\n        </div>\n        <Footer />\n      </div>\n    </FavoriteProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}